/*! jQuery Table Sorter - v0.1.0-pre - Jul 2013
* https://github.com/kensnyder/jQuery-TableSorter
* Copyright (c) 2013 Ken Snyder; Licensed MIT */
(function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)})(function(t){"use strict";function e(t){return t?t.innerText||t.textContent||"":""}t.TableSorter=function(){this.initialize.apply(this,Array.prototype.slice.call(arguments))},t.TableSorter.defaultOptions={zebra:!1,thead:"tr:eq(0)",headings:"th",rows:"tr:gt(0)"},t.TableSorter.prototype={initialize:function(e,r){this.$table=t(e),0!==this.$table.length&&(this.options=t.extend({},t.TableSorter.defaultOptions,r||{}),this.$placeholder=t("<div />"),this.filters={},this._index())},getInstance:function(){return this},_index:function(){this.$thead=this.$table.find(this.options.thead),this.headings=this._getHeadings(this.options.headings),this.rows=this._getRows(this.options.rows),this.zebra(this.options.zebra),this._valueCache=[]},reindex:function(){return this._index(),this},_getHeadings:function(t){return this.$table.find(t).toArray()},_getRows:function(t){return this.$table.find(t).toArray()},setValues:function(t,e,r){return this._valueCache.push({column:t+1,heading:e,values:r}),this},getValues:function(t){var e;if(0===this.headings.length)return null;0===this._valueCache.length&&this._collectValues(),"string"==typeof t&&(t=parseInt(t,10)),e="number"==typeof t?"column":"heading";for(var r=0,n=this._valueCache.length;n>r;r++)if(this._valueCache[r][e]===t)return this._valueCache[r].values;return null},getDatatype:function(t){return t.getAttribute("data-datatype")||"string"},getDatatypeProcessor:function(e){var r=this.getDatatype(e);if(!t.TableSorter.datatypes[r])throw Error("Unknown datatype `"+r+"`; function not found on $.TableSorter.datatypes."+r+".");return t.TableSorter.datatypes[r]},getCollector:function(e,r){var n,a;for(n in t.TableSorter.collectors)if(a=e.getAttribute("data-"+n))break;return a||(a=r+1,n="column"),function(e,r){return t.TableSorter.collectors[n](e,r,a)}},_collectValues:function(){var t,e,r,n,a,o,i,s,l=0,u=function(t,e){return t.val===e.val?0:t.val>e.val?1:-1},c=this.$thead.children();for(t=0,e=c.length;e>t;t++)if(a=c[t],a===this.headings[l]){for(l++,i=this.getDatatypeProcessor(a),s=this.getCollector(a,t),o=[],r=0,n=this.rows.length;n>r;r++)o.push({tr:this.rows[r],val:i(s(r,this.rows[r]))});this.setValues(t,a,o.sort(u))}},sort:function(t,e){var r,n,a,o,i=[];e=e&&/desc|-1/i.test(e)?-1:1,this.$table.replaceWith(this.$placeholder),r=this.$table.get(0);var s=this.getValues(t);for(n=0,a=s.length;a>n;n++)o=1==e?n:a-n-1,r.appendChild(s[o].tr),i[n]=s[o].tr;return this.rows=i,this.zebra(this.options.zebra),this.$placeholder.replaceWith(this.$table),this},filter:function(t){var e,r,n,a,o;if("string"==typeof t){if(a=this.filters[t],!a)throw new TypeError("Unknown filter `"+t+"`. Filters must be pre-defined with defineFilter(name,spec).");if(n=[].slice.call(arguments,1),a.dynamicRule)for(o=[void 0,void 0].concat(n),e=0,r=this.rows.length;r>e;e++)o[0]=e,o[1]=this.rows[e],this.rows[e].style.display=a.dynamicRule.apply(null,o)?"":"none";else for(o=[void 0,void 0].concat(n),e=0,r=a.values.length;r>e;e++)o[0]=e,o[1]=a.values[e],this.rows[e].style.display=a.rule.apply(null,o)?"":"none"}else for(e=0,r=this.rows.length;r>e;e++)this.rows[e].style.display=t(e,this.rows[e])?"":"none";return this.zebra(this.options.zebra),this},defineFilter:function(e,r){var n,a,o,i,s;if(r.column&&(r.collector=["column",r.column]),"string"==typeof r.datatype&&(s=t.TableSorter.datatypes[r.datatype],!s))throw new TypeError("Unknown datatype `"+r.datatype+"`. A filter datatype must be a function or property of $.TableSorter.datatypes.");if("function"==typeof r.datatype&&(s=r.datatype),"function"==typeof r.collector&&s&&(r.collector=function(t){return function(e,r){return s(t(e,r))}}(r.collector)),t.isArray(r.collector)&&(i=t.TableSorter.collectors[r.collector[0]],o=[void 0,void 0].concat(r.collector.slice(1)),r.collector=s?function(t,e){return o[0]=t,o[1]=e,s(i.apply(null,o))}:function(t,e){return o[0]=t,o[1]=e,i.apply(null,o)}),!r.dynamicRule){for(r.values=[],n=0,a=this.rows.length;a>n;n++)r.values.push(r.collector(n,this.rows[n]));if(r.rule||(r.rule=t.TableSorter.rules.contains),"string"==typeof r.rule&&t.TableSorter.rules[r.rule]&&(r.rule=t.TableSorter.rules[r.rule]),"function"!=typeof r.rule)throw new TypeError("defineFilter(name, spec) - spec.rule `"+r.rule+"` must be a function or a property of $.TableSorter.rules")}this.filters[e]=r},zebra:function(t){if(!t||0===t.length)return this;for(var e=t.length,r=RegExp("\\b("+t.join("|")+")\\b","g"),n=0,a=0,o=this.rows.length;o>a;a++)"none"!=this.rows[a].style.display&&(this.rows[a].className=this.rows[a].className.replace(r,"")+(" "+t[n++%e]));return this}},t.TableSorter.version="0.1.0-pre",t.TableSorter.datatypes={string:Array.prototype.trim?function(t){return t.trim()}:function(e){return t.trim(e)},number:function(t){return parseFloat(t.replace(/^[^\d\.+\-]+/,""))},date:function(e){var r,a,o,i,s,l;for(i=t.TableSorter.dateUtils.dateParsers,s=0,l=i.length;l>s;s++)if(o=e.match(i[s].matcher)){a=i[s].getParts(o);break}for(i=t.TableSorter.dateUtils.timeParsers,s=0,l=i.length;l>s;s++)if(o=e.match(i[s].matcher)){r=i[s].getParts(o);break}return a||r?(a||(a=n.today),r||(r=[0,0,0]),new Date(parseInt(a[0],10),parseInt(a[1],10)-1,parseInt(a[2],10),parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10)).getTime()):0}};var r=new Date,n=t.TableSorter.dateUtils={today:[r.getFullYear(),r.getMonth(),r.getDate()],monthLookup:{jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12},regexes:{YEAR:"[1-9]\\d{3}",MONTH:"1[0-2]|0?[1-9]",MONTHNAME:"jan|january|feb|february|mar|march|apr|april|may|jun|june|jul|july|aug|august|sep|september|oct|october|nov|november|dec|december",DAY:"3[01]|[12]\\d|0?[1-9]",DAY2:"3[01]|[12]\\d|0[1-9]",TIMEZONE:"[+-][01]\\d\\:?[0-5]\\d",H24:"[01]\\d|2[0-3]",MIN:"[0-5]\\d",SEC:"[0-5]\\d",MS:"\\d{3,}",H12:"0?[1-9]|1[012]",AMPM:"am|pm"},makePattern:function(t){return t=t.replace(/_([A-Z][A-Z0-9]+)_/g,function(t,e){return n.regexes[e]}),RegExp(t,"i")}};n.timeParsers=[{matcher:n.makePattern("(?:\\b|T| )(_H12_)(?:\\:(_MIN_)(?:\\:(_SEC_))?)? ?(_AMPM_)"),getParts:function(t){var e=parseInt(t[1],10);e="am"==t[2].toLowerCase()?12==e?0:e:12==e?12:e+12;var r=t[2]||0,n=t[3]||0;return[e,r,n,0]}},{matcher:n.makePattern("(?:\\b|T| )(_H24_)\\:(_MIN_)(?:\\:(_SEC_)(?:\\.(_MS_))?)?"),getParts:function(t){var e=t[1],r=t[2],n=t[3]||0,a=t[4]||0;return[e,r,n,a]}}],n.dateParsers=[{matcher:n.makePattern("^(_MONTH_)( ?[\\/-] ?)(_DAY_)\\2(_YEAR_)"),getParts:function(t){var e=t[1],r=t[3],n=t[4];return[n,e,r]}},{matcher:n.makePattern("^(_YEAR_)-(_MONTH_)-(_DAY_)"),getParts:function(t){var e=t[1],r=t[2],n=t[3];return[e,r,n]}},{matcher:n.makePattern("^(_DAY_)([ -])(_MONTHNAME_).?\\2(_YEAR_)"),getParts:function(t){var e=t[4],r=n.monthLookup[t[3].toLowerCase().slice(0,3)],a=t[1];return[e,r,a]}},{matcher:n.makePattern("^(_MONTHNAME_) (_DAY_),? (_YEAR_)"),getParts:function(t){var e=t[3],r=n.monthLookup[t[1].toLowerCase().slice(0,3)],a=t[2];return[e,r,a]}}],t.TableSorter.collectors={attr:function(t,e,r){return e.getAttribute(r)},cellAttr:function(e,r,n,a){return"number"==typeof n?r.children[n-1].getAttribute(a):t(r).find(n).attr(a)},column:function(t,r,n){return e(r.children[n-1])},columns:function(t,r,n,a){n=n.split(/\s*,\s*/);for(var o=[],i=0,s=n.length;s>i;i++)o.push(e(r.children[n[i]-1]));return o.join(a||" ")},selector:function(e,r,n){return t(r).find(n).text()},callback:function(t,e,r){return window[r](e)}},t.TableSorter.rules={same:function(t,e,r){return e.toLowerCase()===r.toLowerCase()},exact:function(t,e,r){return e===r},contains:function(t,e,r){return e.toLowerCase().indexOf(r.toLowerCase())>-1},containsCaseSensitive:function(t,e,r){return e.indexOf(r)>-1},matchAt:function(t,e,r,n){return e.toLowerCase().indexOf(r.toLowerCase())===n},matchAtCaseSensitive:function(t,e,r,n){return e.indexOf(r)===n},startsWith:function(t,e,r){return 0===e.toLowerCase().indexOf(r.toLowerCase())},startsWithCaseSensitive:function(t,e,r){return 0===e.indexOf(r)},regExp:function(t,e,r){return r.test(e)},gt:function(t,e,r){return parseFloat(e)>r},gte:function(t,e,r){return parseFloat(e)>=r},lt:function(t,e,r){return r>parseFloat(e)},lte:function(t,e,r){return r>=parseFloat(e)},eq:function(t,e,r){return parseFloat(e)===r},ne:function(t,e,r){return parseFloat(e)!=r},between:function(t,e,r,n){var a=parseFloat(e);return a>=r&&n>=a},outside:function(t,e,r,n){var a=parseFloat(e);return r>a||a>n},isEmpty:function(t,e){return""===e},isNotEmpty:function(t,e){return""!==e}},t.fn.tablesorter=function(e){var r=this.data("TableSorterInstance");if("string"==typeof e&&r instanceof t.TableSorter&&"function"==typeof this.data("TableSorterInstance")[e]){var n=Array.prototype.slice.call(arguments,1);return this.data("TableSorterInstance")[e].apply(this.data("TableSorterInstance"),n)}return this.data("TableSorterInstance")?this:this.each(function(){var r=t(this),n=new t.TableSorter(r,e);r.data("TableSorterInstance",n)})}});